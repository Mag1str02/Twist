# Как писать код

Главный принцип _Twist_: 

Разработчик пишет компонент (примитив синхронизации, лок-фри структуру данных, пул потоков и т.п.) **один** раз, после чего этот компонент **без изменений** может использоваться

- в нагрузочных многопоточных тестах с внедрения сбоев,
- в тестах в режиме детерминированной симуляции,
- в релизной сборке.

## Twist-_ed_

Чтобы компонент мог адаптироваться к окружению / параметрам сборки,
разработчик должен **аннотировать** его для _Twist_:

- [Стандартная библиотека](ed/std.md)
- [Механизмы ожидания](ed/wait.md)
- [Статические [тред-локальные] переменные](ed/static.md)

## Assist

Разработчик может добавлять в свой код [дополнительные аннотации и подсказки](assist.md)
для среды исполнения, в первую очередь – для симулятора.

## Tracing

Разработчик может разметить свой код для [трассировки](trace.md).

## Примеры

Пример аннотированного компонента: [лок-фри стек Трейбера](/demo/treiber_stack/treiber_stack.hpp)

Также см. [examples](/examples)

## Release

В **релизной** сборке пользователь **не платит** за аннотации для _Twist_, следы библиотеки стираются.
